<!-- popup.html -->
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Popup</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <!-- Setup Container -->
  <div name="setup_container">
    <!-- Connect to Server -->
    <small>connect to server</small>
    <form id="connect_to_server_form" style="display:flex; width:100%;">
      <input name="server_host" placeholder="https://localhost:5964/ ..." style="flex:1;" />
      <button type="submit">Connect</button>
    </form>

    <!-- Set HuggingFace API KEY -->
    <small>set hugging face api key</small>
    <form id="set_hugging_face_api_key_form" style="display:flex; width:100%;">
      <input name="hf_api_key" placeholder="hf_xxxxxxxxxxxxxxxxx ..." style="flex:1;" />
      <button type="submit">Set API Key</button>
    </form>
  </div>

  <!-- Main -->
  <div name="main">
    <div name="header" style="display:grid;">
      <small id="is_server_connected">ðŸ”´ Not connected to any servers</small>
      <small id="is_api_key_set">ðŸ”´ API Key not set yet</small>
    </div>
    <div name="main_container" style="display:grid">
      <small>Create a listing:</small>
      <form id="presets_form" style="display:flex; width:100%">
        <select name="presets_select" style="flex:1;">
          <option value="preset_00" name="preset_00">preset 0</option>
          <option value="preset_01" name="preset_01">preset 1</option>
          <option value="preset_02" name="preset_02">preset 2</option>
          <option value="preset_03" name="preset_03">preset 3</option>
          <option value="preset_04" name="preset_04">preset 4</option>
          <option value="preset_05" name="preset_05">preset 5</option>
          <option value="preset_06" name="preset_06">preset 6</option>
          <option value="preset_07" name="preset_07">preset 7</option>
        </select>
      </form>
    </div>
  </div>

  <!-- Divider -->
  <hr style="border-top: 1px solid #333" />

  <!-- Edit Export -->
  <div name="edit_export">
    <form id="edit_export_container" style="display:grid;">
      <!-- Header -->
      <div name="edit_export_header" style="width:100%;">
        <small>header</small>
        <div style="display:flex; width:100%;">
          <input placeholder="city" name="city" style="flex:1;" />
          <input placeholder="zip_code" name="zip_code" style="flex:1;" />
        </div>
      </div>

      <!-- Details -->
      <div name="edit_export_details" style="width:100%;">
        <small>details</small>
        <div style="display:flex; width:100%;">
          <input placeholder="bedrooms" type="number" name="bedrooms" style="flex:1;" />
          <input placeholder="bathrooms" type="number" name="bathrooms" style="flex:1;" />
        </div>
      </div>

      <!-- Contact -->
      <div name="edit_export_contact" style="width:100%;">
        <small>contact</small>
        <div style="display:flex; width:100%;">
          <input placeholder="phone_num" name="phone_num" style="flex:1;" />
          <input placeholder="contact_name" name="contact_name" style="flex:1;" />
        </div>
      </div>

      <!-- Craigslist Query -->
      <div name="edit_export_craigslist_query" style="display:flex; width:100%;">
        <input placeholder="input craigslist query ..." value="2 bedroom basement" name="craigslist_query" style="flex:1;"/>
        <button type="submit">Save</button>
      </div>
    </form>
  </div>

  <!-- Divider -->
  <hr style="border-top: 1px solid #333" />

  <!-- Progress Bar -->
  <form id="progress_form" style="display:grid; width: 100%;">
    <small id="progress_text">[Idle] Waiting for task ...</small>
    <input type="range" min="0" max="100" value="0" style="display:flex; flex:1;" name="progress_bar">
    <small style="text-align: end;" id="progress_value">0%</small>
    <div style="display:flex;">
      <button name="gather_button" style="flex:2">Gather Listings</button>
    </div>
    <div style="display:flex;">
      <button name="fetch_listings_button" style="flex:1">Fetch Listings</button>
      <button name="fetch_outputs_button" style="flex:1">Fetch Outputs</button>
    </div>
    <div id="fetch_container" style="max-height: 75px; overflow-y: auto;"></div>
    </div>

    <!-- Auto-Filler -->
    <div id="auto_filler_form" style="display:grid; width: 100%;">
      <div id="auto_filler_container" style="display:flex;">
        <button id="prompt_ai_button" style="flex:2;">Prompt AI</button>
        <button id="load_data_button" style="flex:1;">Load Data</button>
        <small id="loaded_output_file" style="margin-left: 4px; margin-top: 2px;">No .json file.</small>
      </div>
      <button id="fill_form_button" style="font-size: larger; margin-top: 8px;">Fill form</button>
    </div>

    <!-- Scripts -->
    <script src="../constants.js" defer></script>
    <script src="../store.js" defer></script>
    <script src="../main_dal.js" defer></script>
    <script src="../presets_dal.js" defer></script>
    <script src="../helper.js" defer></script>
    <script src="../server_dal.js" defer></script>
    <script src="popup.js" defer></script>
</body>

</html>